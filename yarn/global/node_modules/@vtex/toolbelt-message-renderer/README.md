# toolbelt-message-renderer

This is the package used by VTEX's toolbelt to render some messages. This includes [`chalk`](https://github.com/chalk/chalk) for text coloring and formating, [`emojic`](https://github.com/IonicaBizau/emojic) for emojis and [`boxen`](https://github.com/sindresorhus/boxen) for creating terminal text boxes.

## Install

```
$ yarn add @vtex/toolbelt-message-renderer
```

## Usage

```ts
import { TemplateRenderer } from '@vtex/toolbelt-message-renderer'

const nodeToRender = {
  type: 'box',
  boxConfig: {
    padding: 2,
    borderStyle: 'round',
  },
  content: '{bold Hello} my {bgBlue.white friends} {{emoji.100}}',
}

console.log(TemplateRenderer.getSingleton().renderNode(nodeToRender))
```

A `NodeToRender` can be of two types: `text` or `box`. In both cases it's necessary to create a `content` field, with text formatted using `chalk` [templating syntax](https://github.com/chalk/chalk#tagged-template-literal) - You can use the formatters specified in [here](https://github.com/chalk/chalk#styles), for example:

```ts
{
  type: 'text',
  content: '{bold.red Red and bold text} unformatted text {blue blue text}'
}
```

In `content` you can also use emojis specified in [here](https://emoji.muan.co/) (you can also search for emojis there) - using emojis is simple, just type `{{emoji.emojiName}}`:

```ts
{
  type: 'text',
  content: '{{emoji.100}} - {{emoji.wink}} - {{emoji.thumbsUp}}'
}
```

In `text` type you only have to specify the field `content`. In case of `box` you can specify `boxConfig`, which accepts options from [boxen](https://github.com/sindresorhus/boxen#options), for example:

```ts
{
  type: 'box',
  boxConfig: {
    margin: 1,
    padding: 1,
    borderColor: 'yellow',
  },
  content: 'Box text content - {red.bold RED_WOLOLO!!!}'
}
```

## Examples

These examples were rendered using [`toolbelt-config-cli`](http://github.com/vtex/toolbelt-config-cli), specifically the `toolbelt-conf message:preview` command. It receives a `json`, so the following examples are represented in `json` format: 

```json
{
  "example1": {
    "type": "box",
    "boxConfig": {
      "margin": 1,
      "padding": 1,
      "borderColor": "yellow"
    },
    "content": "Box text content - {red.bold RED_WOLOLO!!!}"
  }
}
```
Will render:

![](./images/example1.png)

```json
{
  "example2": {
    "type": "text",
    "content": "{bold.bgBlue Hello} world{red !} {{emoji.thumbsUp}}"
  }
}
```
Will render:

![](./images/example2.png)

(Note that `example1` and `example2` and their presence in the rendered images are specifics to how `toolbelt-config-cli` works - it's not affected by `toolbelt-message-renderer`)


