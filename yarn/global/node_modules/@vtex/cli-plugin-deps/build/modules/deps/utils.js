"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getCleanDependencies = exports.cleanDeps = exports.removeNpm = void 0;
const ramda_1 = require("ramda");
const vtex_1 = require("vtex");
const isNpm = (dep) => dep.startsWith('npm:');
exports.removeNpm = (deps) => (inValues) => {
    Object.keys(deps).forEach((key) => {
        if (isNpm(key)) {
            return delete deps[key];
        }
        if (inValues) {
            deps[key] = deps[key].filter((d) => !isNpm(d));
        }
    });
    return deps;
};
exports.cleanDeps = (deps) => ramda_1.keys(exports.removeNpm(deps)());
exports.getCleanDependencies = async (workspace) => {
    return (await vtex_1.createAppsClient({ workspace })
        .getDependencies()
        .then((deps) => {
        return exports.cleanDeps(deps);
    }));
};
